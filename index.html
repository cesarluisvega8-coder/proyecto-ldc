<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Solanlyze - Cuadro de Carga y An√°lisis</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/metricStyles.css">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Plotly -->
    <script src="https://cdn.plot.ly/plotly-2.30.0.min.js"></script>

    <!-- SheetJS (XLSX) -->
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>

<body>
    <!-- Selector de modo oscuro/claro -->
    <div style="position:fixed;top:18px;right:32px;z-index:999;">
        <button id="themeToggle" class="btn btn-outline-dark btn-sm" title="Cambiar modo claro/oscuro">
            <span id="themeIcon">üåô</span> Modo oscuro
        </button>
    </div>

    <!-- perfil horario movido al final del documento -->
    <div class="container py-4">
                <div class="solar-header text-center mb-4 position-relative">
                        <div style="position:absolute;left:24px;top:6px;z-index:1;display:flex;align-items:center;gap:8px;">
                                <img src="assets/icons/sunalyze_logo.png" alt="Solanlyze" style="height:48px;width:auto;border-radius:10px;" />
                        </div>
                        <div class="solar-header-title">
                            <span class="solar-icon">üîÜ</span>
                            <span class="solar-title">Solanlyze</span>
                        </div>
                        <div class="solar-subtitle">Cuadro de Carga y An√°lisis Energ√©tico</div>
                </div>

        <!-- Carga de datos -->
        <div class="card shadow-sm p-4 mb-4">
    <div class="solar-divider"></div>
    <div class="solar-divider"></div>
            <h5>üìÇ Carga de datos</h5>
            <p class="small-muted mb-2">
                ‚Ä¢ Formato plantilla: hoja <strong>LINEA BASE</strong> con columnas: <code>Item, Carga, Potencia (W), 0,1,...,23</code>.<br> ‚Ä¢ Puedes descargar la plantilla, cargar un .xlsx del mismo formato o usar datos de ejemplo.
            </p>

            <div class="row g-2">
                <div class="col-md-4">
                    <input id="fileInput" type="file" accept=".xlsx,.xls,.csv" class="form-control">
                </div>
                <div class="col-md-2 d-grid">
                    <button id="loadBtn" class="btn btn-primary">Cargar archivo</button>
                </div>
                <div class="col-md-3 d-grid">
                    <button id="downloadTemplateBtn" class="btn btn-outline-success">üìÑ Descargar plantilla</button>
                </div>
                <div class="col-md-3 d-grid">
                    <button id="generateSampleBtn" class="btn btn-outline-secondary">‚ú® Datos de ejemplo</button>
                </div>
            </div>
        </div>

        <!-- Ingreso manual -->
        <div class="card shadow-sm p-4 mb-4">
            <h5>‚úçÔ∏è Ingreso manual</h5>
            <p class="small-muted mb-2">Ingresa el nombre y la potencia. El horario se definir√° en el pop-up al presionar Agregar.</p>

            <div class="row g-2 align-items-end">
                <div class="col-md-3">
                    <label class="form-label small mb-0">Nombre de la carga</label>
                    <input id="manualCarga" type="text" class="form-control" placeholder="Ej: Aire acondicionado">
                </div>
                <div class="col-md-2">
                    <label class="form-label small mb-0">Potencia (W)</label>
                    <input id="manualPotencia" type="number" class="form-control" placeholder="Ej: 1200">
                </div>
                <div class="col-md-2 d-grid">
                    <button id="addManualBtn" class="btn btn-success">Agregar</button>
                </div>
            </div>
        </div>

        <!-- ========== ELECTRODOM√âSTICOS R√ÅPIDOS FUNCIONALES Y CONECTADOS A LA TABLA ========== -->
        <div class="card shadow-sm p-4 mb-4">
            <h5>‚ö° Agregar electrodom√©sticos r√°pidamente</h5>
            <p class="small text-muted">
                Selecciona un electrodom√©stico, ajusta su potencia, cantidad y horario de uso. Al presionar ‚ûï se agregan directamente a la tabla de datos.
            </p>

            <div class="row g-3 mt-3">
                <!-- Panel de electrodom√©sticos esenciales -->
                <div class="col-md-6">
                    <div class="card shadow-sm">
                        <div class="card-header bg-light fw-bold text-center">Electrodom√©sticos esenciales</div>
                        <div class="card-body d-flex flex-wrap justify-content-around gap-3">
                            <div class="appliance-card" data-nombre="Bombillo" data-potencia="80">
                                <img class="appliance-icon" src="assets/icons/bombillo.png" alt="Bombillo">
                                <div class="appliance-label"><strong>Bombillo</strong></div>
                            </div>
                            <div class="appliance-card" data-nombre="Ventilador" data-potencia="100">
                                <img class="appliance-icon" src="assets/icons/fan.png" alt="Ventilador">
                                <div class="appliance-label"><strong>Ventilador</strong></div>
                            </div>
                            <div class="appliance-card" data-nombre="Lavadora" data-potencia="500">
                                <img class="appliance-icon" src="assets/icons/lavadora.png" alt="Lavadora">
                                <div class="appliance-label"><strong>Lavadora</strong></div>
                            </div>
                            <div class="appliance-card" data-nombre="Nevera" data-potencia="300">
                                <img class="appliance-icon" src="assets/icons/nevera.png" alt="Nevera">
                                <div class="appliance-label"><strong>Nevera</strong></div>
                            </div>
                            <div class="appliance-card" data-nombre="PC" data-potencia="200">
                                <img class="appliance-icon" src="assets/icons/PC.png" alt="PC">
                                <div class="appliance-label"><strong>PC</strong></div>
                            </div>
                            <div class="appliance-card" data-nombre="TV" data-potencia="150">
                                <img class="appliance-icon" src="assets/icons/TV.png" alt="TV">
                                <div class="appliance-label"><strong>TV</strong></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Panel de alto consumo -->
                <div class="col-md-6">
                    <div class="card shadow-sm">
                        <div class="card-header bg-light fw-bold text-center">Electrodom√©sticos de gran consumo</div>
                        <div class="card-body d-flex flex-wrap justify-content-around gap-3">
                            <div class="appliance-card" data-nombre="Aire acondicionado" data-potencia="1200">
                                <img class="appliance-icon" src="assets/icons/AC.png" alt="Aire acondicionado">
                                <div class="appliance-label"><strong>AC</strong></div>
                            </div>
                            <div class="appliance-card" data-nombre="Airfryer" data-potencia="1500">
                                <img class="appliance-icon" src="assets/icons/airfryer.png" alt="Airfryer">
                                <div class="appliance-label"><strong>Airfryer</strong></div>
                            </div>
                            <div class="appliance-card" data-nombre="Microondas" data-potencia="1200">
                                <img class="appliance-icon" src="assets/icons/microwave.png" alt="Microondas">
                                <div class="appliance-label"><strong>Microondas</strong></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Detalle de configuraci√≥n -->
            <div id="detalleElectrodomestico" class="mt-4 p-3 border rounded bg-light d-none">
                <h6 class="fw-bold mb-3">‚öôÔ∏è Configuraci√≥n del equipo seleccionado</h6>
                <div class="row g-2 align-items-end">
                    <div class="col-md-3">
                        <label class="form-label">Nombre</label>
                        <input type="text" id="nombreElectro" class="form-control" readonly>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Potencia (W)</label>
                        <input type="number" id="potenciaElectro" class="form-control">
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Cantidad</label>
                        <input type="number" id="cantidadElectro" class="form-control" min="1" value="1">
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Hora inicio</label>
                        <select id="inicioElectro" class="form-select"></select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Hora fin</label>
                        <select id="finElectro" class="form-select"></select>
                    </div>
                    <div class="col-md-1 d-grid">
                        <button class="btn btn-success" id="agregarElectroBtn">‚ûï</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tabla principal -->
        <div class="card shadow-sm p-4 mb-4">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <h5>üìã Tabla de datos</h5>
                <div class="d-flex gap-2">
                    <button id="processBtn" class="btn btn-outline-primary btn-sm">Generar m√©tricas y gr√°ficas</button>
                    <button id="clearTableBtn" class="btn btn-outline-danger btn-sm">üßπ Limpiar tabla</button>
                </div>
            </div>

            <div class="table-responsive" style="max-height: 380px; overflow-y:auto;">
                <table id="tablaManual" class="table table-bordered table-sm align-middle text-center">
                    <thead class="table-light">
                        <tr>
                            <th style="width:40px">#</th>
                            <th>Carga</th>
                            <th style="width:120px">Potencia (W)</th>
                            <th style="width:180px">Horarios</th>
                            <th style="width:120px">Horas encendido</th>
                            <th style="width:140px">Energ√≠a (kWh)</th>
                            <th style="width:80px">Acci√≥n</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="7" class="text-muted">Sin registros ‚Äî agrega datos manualmente o carga un archivo</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- M√©tricas -->
        <!-- Reemplazado por componente de m√©tricas (diario/mensual/anual) -->
        <!-- Begin metricsPanel -->
        <div class="card shadow-sm p-3 mb-4 metrics-card">
    <div class="solar-divider"></div>
    <h5 class="text-center mb-3">üìä M√©tricas energ√©ticas</h5>
    
    <!-- Tabs para periodos -->
    <ul class="nav nav-tabs solar-tabs mb-3 justify-content-center" id="metricsTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="daily-tab" data-bs-toggle="tab" data-bs-target="#dailyMetrics" type="button" role="tab">
                 Diario
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="monthly-tab" data-bs-toggle="tab" data-bs-target="#monthlyMetrics" type="button" role="tab">
                üìÖ Mensual
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="yearly-tab" data-bs-toggle="tab" data-bs-target="#yearlyMetrics" type="button" role="tab">
                üìÜ Anual
            </button>
        </li>
    </ul>

    <!-- Contenido de las pesta√±as -->
    <div class="tab-content" id="metricsTabsContent">
        <!-- M√©tricas Diarias -->
        <div class="tab-pane fade show active" id="dailyMetrics" role="tabpanel">
            <div class="d-flex flex-wrap justify-content-center gap-4">
                <div class="solar-metric">
                    <span class="solar-icon">üîã</span> Energ√≠a diaria: <strong id="energiaTotal_dia">-</strong> kWh/d√≠a
                </div>
                <div class="solar-metric">
                    <span class="solar-icon">‚ö°</span> Potencia media: <strong id="potenciaMedia_dia">-</strong> kW
                </div>
                <div class="solar-metric">
                    <span class="solar-icon">üåû</span> Potencia pico: <strong id="potenciaPico_dia">-</strong> kW
                </div>
            </div>
        </div>

        <!-- M√©tricas Mensuales -->
        <div class="tab-pane fade" id="monthlyMetrics" role="tabpanel">
            <div class="d-flex flex-wrap justify-content-center gap-4">
                <div class="solar-metric">
                    <span class="solar-icon">üîã</span> Energ√≠a mensual: <strong id="energiaTotal_mes">-</strong> kWh/mes
                </div>
                <div class="solar-metric">
                    <span class="solar-icon">‚ö°</span> Potencia media: <strong id="potenciaMedia_mes">-</strong> kW
                </div>
                <div class="solar-metric">
                    <span class="solar-icon">üåû</span> Potencia pico: <strong id="potenciaPico_mes">-</strong> kW
                </div>
            </div>
        </div>

        <!-- M√©tricas Anuales -->
        <div class="tab-pane fade" id="yearlyMetrics" role="tabpanel">
            <div class="d-flex flex-wrap justify-content-center gap-4">
                <div class="solar-metric">
                    <span class="solar-icon">üîã</span> Energ√≠a anual: <strong id="energiaTotal_anio">-</strong> kWh/a√±o
                </div>
                <div class="solar-metric">
                    <span class="solar-icon">‚ö°</span> Potencia media: <strong id="potenciaMedia_anio">-</strong> kW
                </div>
                <div class="solar-metric">
                    <span class="solar-icon">üåû</span> Potencia pico: <strong id="potenciaPico_anio">-</strong> kW
                </div>
            </div>
        </div>
    </div>
</div>
        <!-- End metricsPanel -->

        <!-- Visualizaciones -->
        <div class="card shadow-sm p-3 mb-5">
    <div class="solar-divider"></div>
            <h5 class="text-center mb-3">üìà Visualizaciones</h5>
            <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
                <ul class="nav nav-tabs solar-tabs" id="chartTabs" role="tablist" style="border-radius:1rem;overflow:hidden;">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="ldc-tab" data-bs-toggle="tab" data-bs-target="#ldcPanel" type="button" role="tab" aria-controls="ldcPanel" aria-selected="true">Cuadro de carga LDC</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="heatmap-tab" data-bs-toggle="tab" data-bs-target="#heatmapPanel" type="button" role="tab" aria-controls="heatmapPanel" aria-selected="false">Mapa de calor</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="temporal-tab" data-bs-toggle="tab" data-bs-target="#temporalPanel" type="button" role="tab" aria-controls="temporalPanel" aria-selected="false">Consumo temporal</button>
                    </li>
                </ul>
                <div class="d-flex align-items-center gap-2">
                  <select id="periodSelect" class="form-select" style="max-width:140px;">
                      <option value="dia">Por d√≠a</option>
                      <option value="mes">Por mes</option>
                  </select>
                  <select id="temporalModeSelect" class="form-select form-select-sm" style="max-width:220px;">
                      <option value="suma">Suma por hora (actual)</option>
                      <option value="por-carga">Series por carga</option>
                  </select>
                  <select id="temporalTopNSelect" class="form-select form-select-sm" style="max-width:120px;">
                      <option value="0">All</option>
                      <option value="5">Top 5</option>
                      <option value="10">Top 10</option>
                      <option value="20">Top 20</option>
                  </select>
                </div>
            </div>
            <div class="tab-content" id="chartTabsContent">
                <div class="tab-pane fade" id="temporalPanel" role="tabpanel" aria-labelledby="temporal-tab">
                    <div id="temporalNote" class="alert alert-warning py-2 px-3 mb-2 d-none" style="font-size:0.98em;"></div>
                    <canvas id="temporalChart" style="max-height:320px;width:100%;background:transparent;border-radius:1.2rem;"></canvas>
                </div>
                <div class="tab-pane fade show active" id="ldcPanel" role="tabpanel" aria-labelledby="ldc-tab">
                    <div id="ldcNote" class="alert alert-warning py-2 px-3 mb-2 d-none" style="font-size:0.98em;"></div>
                    <canvas id="ldcChart" style="max-height:320px;"></canvas>
                </div>
                <div class="tab-pane fade" id="heatmapPanel" role="tabpanel" aria-labelledby="heatmap-tab">
                    <div class="row g-3 align-items-start">
                        <div class="col-lg-9 col-md-8 col-12">
                            <div id="heatmapNote" class="alert alert-warning py-2 px-3 mb-2 d-none" style="font-size:0.98em;"></div>
                            <div id="heatmapDiv" style="height:380px;"></div>
                        </div>
                        <div class="col-lg-3 col-md-4 col-12">
                            <div class="card shadow-sm p-3 heatmap-explain">
                                <h6 class="mb-2 heatmap-title">¬øC√≥mo leer el mapa de calor (Potencia vs Tiempo)?</h6>
                                <p class="heatmap-desc">
                                    Este mapa muestra la potencia asociada a cada carga a lo largo del tiempo. En la vista <b>diaria</b> el eje X representa las 24 horas y el eje Y las cargas; los colores indican la potencia (kW) consumida en esa hora por carga. En la vista <b>mensual</b> el eje X son los meses y los valores representan energ√≠a estimada por mes.<br>
                                    <b>Interpretaci√≥n r√°pida:</b>
                                    <ul>
                                        <li><b>Rojo/Amarillo:</b> Zonas de mayor potencia o energ√≠a ‚Äî posibles picos de demanda.</li>
                                        <li><b>Azul/Verde:</b> Bajo consumo ‚Äî horarios seguros o para desplazar cargas.</li>
                                    </ul>
                                    Usa el mapa para identificar picos horarios y planificar desplazamiento de cargas o almacenamiento. La barra lateral muestra la escala (kW o kWh seg√∫n periodo).
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- ALERT CONTAINER handled by JS -->

    <!-- Footer desarrolladores -->
    <div class="container pb-4">
        <div class="text-center text-muted" style="font-size:0.95rem;">
            Desarrollado por: <strong id="developersNames">Oquendo, Vega y Viloria</strong>
        </div>
    </div>

    <!-- Bootstrap Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- jsPDF (UMD build local) -->
    <script src="libs/jspdf.umd.min.js"></script>

    <!-- html2canvas for DOM capture -->
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

    <script type="module" src="js/mainApp.js"></script>
    <!-- NUEVO: M√©tricas por perfil horario (d√≠a / noche) -->
    <div class="container py-4">
        <div class="card shadow-sm p-4 mb-5">
            <h5 class="mb-3">üïò M√©tricas por perfil horario</h5>
            <p class="small text-muted">Genera m√©tricas y visualizaciones (LDC, Consumo temporal y mapa de calor) filtradas por perfil horario: D√≠a (06:00-21:59) o Noche (22:00-05:59).</p>
            <div class="d-flex gap-2 align-items-center mb-3">
                <label class="mb-0">Perfil:</label>
                <select id="perfilHorarioSelect" class="form-select form-select-sm" style="max-width:180px;">
                    <option value="dia">D√≠a (06:00 - 21:59)</option>
                    <option value="noche">Noche (22:00 - 05:59)</option>
                    <option value="custom">Personalizado</option>
                </select>
                <div id="customPerfilControls" class="d-none align-items-center gap-2">
                    <label class="mb-0">Inicio</label>
                    <select id="customStartHour" class="form-select form-select-sm" style="max-width:90px;"></select>
                    <label class="mb-0">Fin</label>
                    <select id="customEndHour" class="form-select form-select-sm" style="max-width:90px;"></select>
                </div>
                <button id="generarPerfilBtn" class="btn btn-primary btn-sm">Generar m√©tricas por perfil</button>
            </div>

            <div id="perfilResults" class="mt-3">
                <div class="row g-3">
                    <div class="col-lg-6">
                        <div class="card p-3">
                            <h6>LDC (perfil)</h6>
                            <canvas id="ldcPerfilChart"></canvas>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card p-3">
                            <h6>Consumo temporal (perfil)</h6>
                            <canvas id="temporalPerfilChart"></canvas>
                        </div>
                    </div>
                    <div class="col-lg-8">
                        <div class="card p-3">
                            <h6>Mapa de calor (perfil)</h6>
                            <div id="heatmapPerfilDiv" style="height:380px;"></div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="d-flex flex-column gap-3">
                            <div class="card p-3">
                                <h6>Resumen (perfil)</h6>
                                <div class="mt-2">
                                    <div> Energ√≠a total: <strong id="resEnergiaPerfil">-</strong> kWh</div>
                                    <div> Potencia media: <strong id="resPotenciaMediaPerfil">-</strong> kW</div>
                                    <div> Potencia pico: <strong id="resPotenciaPicoPerfil">-</strong> kW</div>
                                </div>
                                <div class="mt-3 d-flex gap-2 flex-wrap">
                                    <button id="exportFullReportBtn" class="btn btn-outline-success btn-sm">Descargar informe (PDF)</button>
                                    <button id="exportPerfilBtn" class="btn btn-outline-primary btn-sm">Exportar PNG</button>
                                    <button id="savePerfilPrefBtn" class="btn btn-outline-secondary btn-sm">Guardar preferencia</button>
                                </div>
                            </div>
                            <div class="card p-3">
                                <h6>Notas</h6>
                                <p class="small text-muted">Exporta las gr√°ficas combinadas o guarda la preferencia de perfil para futuras sesiones.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Spinner overlay para generaci√≥n de perfil -->
        <div id="profileSpinner" class="profile-spinner-overlay">
            <div class="profile-spinner">
                <div class="dot"></div>
                <div>Generando m√©tricas... por favor espera</div>
            </div>
        </div>
    <script>
    // Animaci√≥n de m√©tricas solares
    function animateMetrics() {
        document.querySelectorAll('.solar-metric strong').forEach(el => {
            el.style.transition = 'transform 0.7s cubic-bezier(.4,1.4,.6,1)';
            el.style.transform = 'scale(1.25)';
            setTimeout(() => { el.style.transform = 'scale(1)'; }, 700);
        });
    }
    window.addEventListener('DOMContentLoaded', animateMetrics);
    // Tambi√©n animar cuando se actualizan m√©tricas
    const energiaTotal = document.getElementById('energiaTotal');
    const potenciaMedia = document.getElementById('potenciaMedia');
    const potenciaPico = document.getElementById('potenciaPico');
    [energiaTotal, potenciaMedia, potenciaPico].forEach(el => {
        const observer = new MutationObserver(animateMetrics);
        observer.observe(el, { childList: true });
    });
    </script>
    <script>
    // Modo oscuro/claro
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');
    function setTheme(dark) {
    document.body.classList.toggle('dark-mode', dark);
    themeIcon.textContent = dark ? '‚òÄÔ∏è' : 'üåô';
    themeToggle.classList.toggle('btn-dark', dark);
    themeToggle.classList.toggle('btn-outline-dark', !dark);
    themeToggle.textContent = '';
    themeToggle.appendChild(themeIcon);
    themeToggle.append(' ', dark ? 'Modo claro' : 'Modo oscuro');
    localStorage.setItem('theme', dark ? 'dark' : 'light');
    // Disparar evento para actualizar gr√°ficas
    const event = new Event('classChange');
    document.body.dispatchEvent(event);
    }
    themeToggle.addEventListener('click', () => {
        setTheme(!document.body.classList.contains('dark-mode'));
    });
    // Inicializar seg√∫n preferencia
    setTheme(localStorage.getItem('theme') === 'dark');
    </script>


<!-- =================== CHATBASE =================== -->
<script>
(function(){
  if(!window.chatbase||window.chatbase("getState")!=="initialized"){
    window.chatbase=(...a)=>{if(!window.chatbase.q){window.chatbase.q=[]}window.chatbase.q.push(a)};
    window.chatbase=new Proxy(window.chatbase,{get(t,p){if(p==="q"){return t.q}return(...a)=>t(p,...a)}});
  }
  const onLoad=function(){
    const s=document.createElement("script");
    s.src="https://www.chatbase.co/embed.min.js";
    s.id="0qDQ0e7YV_kv0sn-cXXlK";
    s.domain="www.chatbase.co";
    document.body.appendChild(s);
  };
  if(document.readyState==="complete"){onLoad();}
  else{window.addEventListener("load",onLoad);}
})();
</script>


</body>

</html>